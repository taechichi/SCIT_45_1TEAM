<!DOCTYPE html>
<html>
<head>
    <title>Styled Map Example</title>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDH-jV5JFEoHWcKxqNlJ5bgluKYtDP4qxo&libraries=places"></script>
    <!-- 추가 할 라이브러리를 api의 libraries 부분 뒤에 추가 places,geometry -->
    <script>
        let lat;  //위도
        let long; //경도
        var map;  //맵

        function initMap() {

            //getCurrentPosition에서 값을 받으면 position으로 값이 들어간다.
            //position에는 coords.을 통해 latitude, longitude등의 정보를 담고있다.
            //geolocation은 비동기함수 이므로 아래의 맵을 함께 포함시키지 않으면 좌표가 없는 상태로 실행된다.
            //비동기는 다른 함수와 동시에 실행될 수 있도록 하는 함수 따라서 비동기로 되어있기에 좌표구하는 함수가 실행중에 다른 함수도 실행이 실행된다.
            navigator.geolocation.getCurrentPosition((position) => {
                lat = position.coords.latitude;
                long = position.coords.longitude;

                let myLocation = { lat: lat, lng: long};  //장소

                map = new google.maps.Map(document.getElementById('map'), {
                    center: { lat: lat, lng: long},
                    zoom: 18,
                    scaleControl:true,
                    zoomControl: true,
                    mapId:'d506da1b6acddc31',
                    minZoom:15,                 //지도 200m까지 축소
                });   //맵 지정 및 맵 옵션 설정


                const input = document.getElementById('search-input');              //search-input 에서 값을 받아 저장
                const searchBox = new google.maps.places.SearchBox(input);          //places api의 searchbox에 input 데이터 입력

                map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);     //input을 구글지도 좌상단에 위치하게 하는 코드(라이브러리 추가 필요)

                const marker = new google.maps.Marker({
                    position: myLocation,
                    map: map,
                });   //마커 설정 및 마커맵 지정

            });

        }



        google.maps.event.addDomListener(window, 'load', initMap);
    </script>

</head>
<body>
<div id="map" style="height: 500px; width: 100%;"></div>
<input id="search-input" class="controls" type="text" placeholder="Search Box">

</body>
</html>